<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>GeekBrains_JS_lesson_13</title>
	</head>
	<body>
		<script>
	var arr = [];   
// Пример: Случайное целое число между min и max
	function getRandomInt(min, max)
	{
	  return Math.floor(Math.random() * (max - min + 1)) + min;
	}

	function getCard() {
		var cards=['6','7','8','9','10','J','Q','K','A']; //0-8 index
		return cards[getRandomInt(0, cards.length-1)]
	}

	var dealer = [getCard()]; //хотя по правилам сначала дилер (крупье) раздает игрокам, а затем берет себе.
	var player = [getCard(), getCard()];

	function getSum(arr){
	return arr.length;
	}

	function getSum(arr) {
	    var sum = 0;
	    for (var i = 0; i < arr.length; i++) {
	    	var  card=arr[i];
	        if (isNaN(arr[i])) {
	            if (arr[i] != 'A') {
	                sum = sum+10;
	            } else if ((arr[i] == 'A') && ((sum+11) <= 21)) {
	                    sum = sum+11;
	                    } else {
	                            sum = sum+1;
	                      }
	        	} else {
	                sum = sum+parseInt(arr[i]);
	              }
	    	}
	    	return sum;
	}

	function getStatus() {
		return ('Дилер: ' + dealer.join(" ") + ' получает ' + getSum(dealer) + ' очков.' + ' Игрок: ' + player.join(" ")+ ' получает ' +getSum(player) + ' очков'); 
	}

	var answer="";

	do{
	if ((parseInt(getSum(dealer))<22) || (parseInt(getSum(player))<22)) {
		answer=prompt(getStatus() + '\r' + " Хотите еще карту ? да - 1 / нет - любая другая кнопка");
			//сдаем карту игроку либо прекращаем игру \r or \n
				if (answer=='1' ) {
					dealer.push(getCard());
					player.push(getCard());
   
				}
				else {
					dealer.push(getCard());
				}
				if (getSum(player)==21) {alert("Black Jack ! Вы выиграли!"); alert('Итог: ' + getStatus()); break}
				else if (getSum(dealer)==getSum(player)) {alert("Ничья !"); alert('Итог: ' + getStatus()); break}
				else if (getSum(player)>21) {alert("Вы проиграли!"); alert('Итог: ' + getStatus()); break}
				else if (getSum(dealer)>21) {alert("Вы выиграли!"); alert('Итог: ' + getStatus()); break}
				else if (getSum(dealer)==21) {alert("Black Jack! Вы проиграли!"); alert('Итог :' + getStatus()); break}
		}
	}while(answer=='1' || ((parseInt(getSum(player)) || parseInt(getSum(dealer)))<21));
		</script>
	</body>
</html>